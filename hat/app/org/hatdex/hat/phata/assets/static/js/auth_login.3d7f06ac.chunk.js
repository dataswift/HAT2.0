(this["webpackJsonprumpel-react"]=this["webpackJsonprumpel-react"]||[]).push([[0],{249:function(e,t,a){"use strict";a.r(t);var n=a(4),c=a.n(n),r=a(7),o=a(6),s=a(0),i=a.n(s),l=(a(112),a(11)),u=a(19),d=a(5),p=a(115),h=a.n(p),m=a(39),b=a(9),g=a(20),f=a(62),w=a(21),v=a(16),O=a(31),j=a(12),E=a(41);t.default=function(){var e=Object(d.d)(v.h),t=Object(d.d)(v.i),a=Object(d.d)(E.c),n=Object(s.useState)(""),p=Object(o.a)(n,2),k=p[0],x=p[1],N=Object(s.useState)(""),y=Object(o.a)(N,2),B=y[0],C=y[1],I=Object(s.useState)(""),T=Object(o.a)(I,2),S=T[0],A=T[1],J=Object(l.g)(),P=Object(l.h)(),_=Object(d.c)(),q=m.parse(window.location.search).target||"/feed",H=(null===P||void 0===P?void 0:P.state)||{},M=H.from,U=H.query||{},z=U.repeat,D=U.email,F=U.applicationId,G=U.redirectUri,K=function(){M?J.replace(M):window.location.href=window.location.origin+"/#"+q};Object(s.useEffect)((function(){var e=window.location.hostname,t=b.a.getInstance();C(e.substring(0,e.indexOf(".")));var a=h.a.get("token");a&&!t.isTokenExpired(a)&&(_(Object(g.b)(a)),b.a.getInstance(a),K())}),[]);var L=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(""),e.prev=1,e.next=4,Object(f.f)(B,k);case 4:(t=e.sent).parsedBody&&(_(Object(g.b)(t.parsedBody.accessToken)),b.a.getInstance(t.parsedBody.accessToken),n="https:"===window.location.protocol,h.a.set("token",t.parsedBody.accessToken,{expires:3,secure:n,sameSite:"strict"}),K()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a&&A(a["ds.auth.login.passwordIncorrect"]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){_(F&&!e?Object(v.d)(F):Object(v.l)("completed"))}),[_,e,F]),i.a.createElement("div",null,i.a.createElement("div",{className:"flex-column-wrapper auth-login"},i.a.createElement(w.b,{src:null===e||void 0===e?void 0:e.info.graphics.logo.normal,alt:null===e||void 0===e?void 0:e.info.name,state:t}),i.a.createElement("h2",{className:"ds-hmi-email auth-login-email-title"},D),i.a.createElement("h2",{className:"auth-login-title"},i.a.createElement(j.a,{id:z?"ds.auth.login.title.password.repeat":"ds.auth.login.title.password"})),i.a.createElement(w.f,{type:"password","aria-label":"password",placeholder:"Password",autoComplete:"password",id:"password",value:k,hasError:!!S,errorMessage:S,onChange:function(e){return x(e.target.value)}}),i.a.createElement("button",{"aria-label":"Next Button",className:"auth-login-btn ds-hmi-btn",disabled:k.length<3,onClick:function(){return L()}},i.a.createElement(j.a,{id:"ds.auth.nextBtn"})),i.a.createElement(u.b,{className:"auth-login-btn-link",to:"/auth/recover-password"},i.a.createElement(j.a,{id:"ds.auth.login.forgotPassword"})),i.a.createElement("hr",null),i.a.createElement("p",{className:"auth-login-have-an-account"},i.a.createElement(j.a,{id:z?"ds.auth.login.title.wantToCreateAccount":"ds.auth.login.title.dontHaveAnAccount"})),i.a.createElement("button",{className:"auth-login-btn-signup ds-hmi-btn",onClick:function(){window.location.href=F&&G?"".concat(O.a.links.hatters,"/services/signup?application_id=").concat(F,"&redirect_uri=").concat(G):"".concat(O.a.links.hatters,"/hat/signup")}},i.a.createElement(j.a,{id:"ds.auth.signupBtn"}))))}}}]);
//# sourceMappingURL=auth_login.3d7f06ac.chunk.js.map