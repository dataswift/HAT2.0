(this["webpackJsonprumpel-react"]=this["webpackJsonprumpel-react"]||[]).push([[0],{265:function(t,e,a){"use strict";a.r(e);var n=a(6),s=a(7),c=a(2),i=a.n(c),o=a(0),r=(a(102),a(11)),l=a(18),d=a(5),u=a(70),b=a.n(u),h=a(33),p=a(10),j=a(19),O=a(46),g=a(20),w=a(17),f=a(25),m=a(13),v=a(35),x=a(1);e.default=function(){var t=Object(d.d)(w.h),e=Object(d.d)(w.i),a=Object(d.d)(v.c),c=Object(o.useState)(""),u=Object(s.a)(c,2),k=u[0],y=u[1],N=Object(o.useState)(""),B=Object(s.a)(N,2),C=B[0],I=B[1],S=Object(o.useState)(""),T=Object(s.a)(S,2),E=T[0],A=T[1],H=Object(r.g)(),J=Object(r.h)(),P=Object(d.c)(),_=h.parse(window.location.search).target||"/feed",q=(null===J||void 0===J?void 0:J.state)||{},F=q.from,M=q.query||{},U=M.repeat,z=M.email,D=M.applicationId,G=M.redirectUri,K=function(){var t=null===F||void 0===F?void 0:F.search.toString().includes("www.dataswift.io%2Fsign-up-login");F&&!t?H.replace(F):window.location.href=window.location.origin+"/#"+_};Object(o.useEffect)((function(){var t=window.location.hostname,e=p.a.getInstance();I(t.substring(0,t.indexOf(".")));var a=b.a.get("token");a&&!e.isTokenExpired(a)&&(P(Object(j.b)(a)),p.a.getInstance(a),K())}),[]);var L=function(){var t=Object(n.a)(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return A(""),t.prev=1,t.next=4,Object(O.f)(C,k);case 4:(e=t.sent).parsedBody&&(P(Object(j.b)(e.parsedBody.accessToken)),p.a.getInstance(e.parsedBody.accessToken),n="https:"===window.location.protocol,b.a.set("token",e.parsedBody.accessToken,{expires:3,secure:n,sameSite:"strict"}),K()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a&&A(a["ds.auth.login.passwordIncorrect"]);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){P(D&&!t?Object(w.d)(D):Object(w.l)("completed"))}),[P,t,D]),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"flex-column-wrapper auth-login",children:[Object(x.jsx)(g.b,{src:null===t||void 0===t?void 0:t.info.graphics.logo.normal,alt:null===t||void 0===t?void 0:t.info.name,state:e}),Object(x.jsx)("h2",{className:"ds-hmi-email auth-login-email-title",children:z}),Object(x.jsx)("h2",{className:"auth-login-title",children:Object(x.jsx)(m.a,{id:U?"ds.auth.login.title.password.repeat":"ds.auth.login.title.password",asHtml:!0})}),Object(x.jsx)(g.e,{type:"password","aria-label":"password",placeholder:"Password",autoComplete:"password",id:"password",value:k,hasError:!!E,errorMessage:E,onChange:function(t){return y(t.target.value)}}),Object(x.jsx)("button",{"aria-label":"Next Button",className:"auth-login-btn ds-hmi-btn ds-hmi-btn-primary",disabled:k.length<3,onClick:function(){return L()},children:Object(x.jsx)(m.a,{id:"ds.auth.nextBtn"})}),Object(x.jsx)(l.b,{className:"auth-login-btn-link",to:"/auth/recover-password",children:Object(x.jsx)(m.a,{id:"ds.auth.login.forgotPassword"})}),Object(x.jsx)("hr",{}),Object(x.jsx)("p",{className:"auth-login-have-an-account",children:Object(x.jsx)(m.a,{id:U?"ds.auth.login.title.wantToCreateAccount":"ds.auth.login.title.dontHaveAnAccount"})}),Object(x.jsx)("button",{className:"auth-login-btn-signup ds-hmi-btn ds-hmi-btn-primary",onClick:function(){window.location.href=D&&G?"".concat(f.a.links.hatters,"/services/signup?application_id=").concat(D,"&redirect_uri=").concat(G):"".concat(f.a.links.hatters,"/hat/signup")},children:Object(x.jsx)(m.a,{id:"ds.auth.signupBtn"})})]})})}}}]);
//# sourceMappingURL=auth_login.946b20bc.chunk.js.map