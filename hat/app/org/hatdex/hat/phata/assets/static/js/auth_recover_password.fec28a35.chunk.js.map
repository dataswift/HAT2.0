{"version":3,"sources":["features/authentication/AuthRecoverPassword.tsx"],"names":["AuthRecoverPassword","parentApp","useSelector","selectApplicationHmi","parentAppState","selectApplicationHmiState","messages","selectMessages","useState","email","setEmail","errorMessage","setErrorMessage","errorSuggestion","setErrorSuggestion","successfulResponse","setSuccessfulResponse","resetPassword","a","recoverPassword","Date","validateAndReset","isEmail","className","src","info","graphics","logo","normal","alt","name","state","id","onClick","asHtml","type","placeholder","autoComplete","value","hasError","onChange","e","target","disabled","length"],"mappings":"6OAiGeA,UAvFuB,WACpC,IAAMC,EAAYC,YAAYC,KACxBC,EAAiBF,YAAYG,KAC7BC,EAAWJ,YAAYK,KAHa,EAIhBC,mBAAS,IAJO,mBAInCC,EAJmC,KAI5BC,EAJ4B,OAKFF,mBAAS,IALP,mBAKnCG,EALmC,KAKrBC,EALqB,OAMIJ,mBAAS,IANb,mBAMnCK,EANmC,KAMlBC,EANkB,OAOUN,mBAAsB,MAPhC,mBAOnCO,EAPmC,KAOfC,EAPe,KASpCC,EAAa,uCAAG,sBAAAC,EAAA,+EAEAC,YAAgB,CAAEV,MAAOA,IAFzB,eAKhBO,EAAsB,IAAII,MALV,gDAQdd,IACFM,EAAgBN,EAAS,uBACzBQ,EAAmBR,EAAS,4BAVZ,yDAAH,qDAebe,EAAgB,uCAAG,sBAAAH,EAAA,sDACnBI,YAAQb,GACVQ,IAEIX,IACFM,EAAgBN,EAAS,mCACzBQ,EAAmBR,EAAS,8CANT,2CAAH,qDAWtB,OACE,6BACE,yBAAKiB,UAAW,kCACd,kBAAC,IAAD,CACEC,IAAG,OAAEvB,QAAF,IAAEA,OAAF,EAAEA,EAAWwB,KAAKC,SAASC,KAAKC,OACnCC,IAAG,OAAE5B,QAAF,IAAEA,OAAF,EAAEA,EAAWwB,KAAKK,KACrBC,MAAO3B,IAGRW,GACC,oCACE,wBAAIQ,UAAW,uCAAwCd,GACvD,wBAAIc,UAAW,oBACb,kBAAC,IAAD,CAAeS,GAAI,2CAGrB,yBAAKT,UAAW,kBAAmBU,QAAS,kBAAMZ,MAChD,kBAAC,IAAD,CAAeW,GAAI,4CAA6CE,QAAQ,OAK5EnB,GACA,oCACE,wBAAIQ,UAAW,oBACb,kBAAC,IAAD,CAAeS,GAAI,mCAErB,kBAAC,IAAD,CACEG,KAAM,QACNC,YAAa,QACbC,aAAc,QACdL,GAAI,QACJM,MAAO7B,EACP8B,WAAY5B,EACZA,aAAcA,EACdE,gBAAiBA,EACjB2B,SAAU,SAACC,GAAD,OAAO/B,EAAS+B,EAAEC,OAAOJ,UAGrC,4BAAQf,UAAW,uCACjBoB,SAAUlC,EAAMmC,OAAS,EACzBX,QAAS,kBAAMZ,MAEf,kBAAC,IAAD,CAAeW,GAAI","file":"static/js/auth_recover_password.fec28a35.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport './AuthLogin.scss';\nimport { recoverPassword } from '../../api/hatAPI';\nimport { AuthApplicationLogo, Input } from 'hmi';\nimport { isEmail } from '../../utils/validations';\nimport { selectApplicationHmi, selectApplicationHmiState } from '../applications/applicationsSlice';\nimport { useSelector } from 'react-redux';\nimport FormatMessage from '../messages/FormatMessage';\nimport { selectMessages } from '../messages/messagesSlice';\n\nconst AuthRecoverPassword: React.FC = () => {\n  const parentApp = useSelector(selectApplicationHmi);\n  const parentAppState = useSelector(selectApplicationHmiState);\n  const messages = useSelector(selectMessages);\n  const [email, setEmail] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [errorSuggestion, setErrorSuggestion] = useState('');\n  const [successfulResponse, setSuccessfulResponse] = useState<Date | null>(null);\n\n  const resetPassword = async () => {\n    try {\n      const res = await recoverPassword({ email: email });\n\n      if (res) {\n        setSuccessfulResponse(new Date());\n      }\n    } catch (error) {\n      if (messages) {\n        setErrorMessage(messages['ds.auth.error.oops']);\n        setErrorSuggestion(messages['ds.auth.error.tryAgain']);\n      }\n    }\n  };\n\n  const validateAndReset = async () => {\n    if (isEmail(email)) {\n      resetPassword();\n    } else {\n      if (messages) {\n        setErrorMessage(messages['ds.auth.error.notValidUsername']);\n        setErrorSuggestion(messages['ds.auth.error.notValidUsernameSuggestion']);\n      }\n    }\n  };\n\n  return (\n    <div>\n      <div className={'flex-column-wrapper auth-login'}>\n        <AuthApplicationLogo\n          src={parentApp?.info.graphics.logo.normal}\n          alt={parentApp?.info.name}\n          state={parentAppState}\n        />\n\n        {successfulResponse && (\n          <>\n            <h2 className={'ds-hmi-email auth-login-email-title'}>{email}</h2>\n            <h2 className={'auth-login-title'}>\n              <FormatMessage id={'ds.auth.recoverPassword.success.title'} />\n            </h2>\n\n            <div className={'auth-login-text'} onClick={() => validateAndReset()}>\n              <FormatMessage id={'ds.auth.recoverPassword.success.sendAgain'} asHtml={true} />\n            </div>\n          </>\n        )}\n\n        {!successfulResponse && (\n          <>\n            <h2 className={'auth-login-title'}>\n              <FormatMessage id={'ds.auth.recoverPassword.title'} />\n            </h2>\n            <Input\n              type={'email'}\n              placeholder={'Email'}\n              autoComplete={'email'}\n              id={'email'}\n              value={email}\n              hasError={!!errorMessage}\n              errorMessage={errorMessage}\n              errorSuggestion={errorSuggestion}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            \n            <button className={'auth-recover-password-btn ds-hmi-btn'}\n              disabled={email.length < 3}\n              onClick={() => validateAndReset()}\n            >\n              <FormatMessage id={'ds.auth.recoverPassword.resetBtn'} />\n            </button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AuthRecoverPassword;\n"],"sourceRoot":""}